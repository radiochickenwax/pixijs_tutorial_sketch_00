<!doctype html>
<html>
    <head>
	<meta charset="utf-8">
	<title>Hello World</title>
	<style>* {padding: 0; margin: 0}</style>
    </head>
    
    <script src="pixi/pixi.min.js"></script>
    <body>
	<script type="text/javascript">
	 let type = "WebGL"
	 if(!PIXI.utils.isWebGLSupported()){
	     type = "canvas"
	 }

	 PIXI.utils.sayHello(type)

	 //Aliases
	 let Application = PIXI.Application,
	     loader = PIXI.loader,
	     resources = PIXI.loader.resources,
	     TextureCache = PIXI.utils.TextureCache,
	     Rectangle = PIXI.Rectangle,
	     Sprite = PIXI.Sprite;

	 
	 //Create a Pixi Application
	 let app = new PIXI.Application({ 
	     width: 256,         // default: 800
	     height: 256,        // default: 600
	     antialias: true,    // default: false
	     transparent: false, // default: false
	     forceCanvas: true,
	     resolution: 1       // default: 1
	 }
	 );

	 app.renderer.backgroundColor = 0x061639;
	 app.renderer.autoResize = true;
	 app.renderer.resize(512, 512);

	 // fill entire window
	 app.renderer.view.style.position = "absolute";
	 app.renderer.view.style.display = "block";
	 app.renderer.autoResize = true;
	 app.renderer.resize(window.innerWidth, window.innerHeight);

	 // 
	 //Add the canvas that Pixi automatically created for you to the HTML document
	 document.body.appendChild(app.view);

	 //load an image and run the `setup` function when it's done
	 /* PIXI.loader
	    .add("images/cat.png")
	    .load(setup); */

	 /* loader
	    .add("images/tileset.png")
	    .load(setup); */

	 loader
	     .add("images/treasureHunter.json")
	     .load(setup);
	 
	 //This `setup` function will run when the image has loaded
	 function setup() {
	     //There are 3 ways to make sprites from textures atlas frames

	     //1. Access the `TextureCache` directly
	     let dungeonTexture = TextureCache["dungeon.png"];
	     dungeon = new Sprite(dungeonTexture);
	     app.stage.addChild(dungeon);

	     //2. Access the texture using through the loader's `resources`:
	     explorer = new Sprite(
		 resources["images/treasureHunter.json"].textures["explorer.png"]
	     );
	     explorer.x = 68;

	     //Center the explorer vertically
	     explorer.y = app.stage.height / 2 - explorer.height / 2;
	     app.stage.addChild(explorer);

	     //3. Create an optional alias called `id` for all the texture atlas 
	     //frame id textures.
	     id = PIXI.loader.resources["images/treasureHunter.json"].textures; 
	     
	     //Make the treasure box using the alias
	     treasure = new Sprite(id["treasure.png"]);
	     app.stage.addChild(treasure);

	     //Position the treasure next to the right edge of the canvas
	     treasure.x = app.stage.width - treasure.width - 48;
	     treasure.y = app.stage.height / 2 - treasure.height / 2;
	     app.stage.addChild(treasure);
	 }
	</script>
    </body>
</html>
